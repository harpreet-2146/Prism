# ================================================================
# PRISM BACKEND — ENVIRONMENT VARIABLES
# ================================================================
# Copy this file to .env and fill in your actual values.
# NEVER commit your .env file to git.
# ================================================================

# ================================================================
# APPLICATION (required)
# ================================================================
NODE_ENV=development
PORT=5000
FRONTEND_URL=http://localhost:5173
# Full URL of this backend (used in export download links, OAuth redirects)
BASE_URL=http://localhost:5000

# ================================================================
# DATABASE (required)
# ================================================================
# PostgreSQL connection string
# Railway format: postgresql://postgres:PASSWORD@HOST:PORT/railway
# Local format:   postgresql://USER:PASSWORD@localhost:5432/prism
DATABASE_URL=postgresql://your_password@localhost:5432/prism

# ================================================================
# SECURITY — JWT (required)
# ================================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=REPLACE_WITH_64_CHAR_HEX_STRING
JWT_REFRESH_SECRET=REPLACE_WITH_DIFFERENT_64_CHAR_HEX_STRING
# Token expiry durations (use JWT notation: 15m, 1h, 7d, etc.)
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ================================================================
# RATE LIMITING
# ================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ================================================================
# GROQ AI — LLM (required for chat)
# Get your free key: https://console.groq.com
# Free tier: 14,400 requests/day
# ================================================================
GROQ_API_KEY=your_groq_api_key_here
GROQ_MODEL=llama-3.3-70b-versatile
GROQ_MAX_TOKENS=3000
GROQ_TEMPERATURE=0.7

# ================================================================
# HUGGINGFACE — Embeddings (required for document search)
# Get your free token: https://huggingface.co/settings/tokens
# Free tier: available with rate limits
# ================================================================
HF_TOKEN=your_huggingface_token_here
HF_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# ================================================================
# AI IMAGE GENERATION (optional)
# Set ENABLE_AI_IMAGE_GENERATION=true to use HuggingFace image models.
# Recommendation: keep false — PDF-extracted screenshots are higher quality
# for SAP interfaces than any AI-generated image.
# Free model: stabilityai/stable-diffusion-2-1
# Better model: black-forest-labs/FLUX.1-schnell (needs HF Pro ~$9/month)
# ================================================================
ENABLE_AI_IMAGE_GENERATION=false
HF_IMAGE_MODEL=stabilityai/stable-diffusion-2-1

# ================================================================
# IMAGE FALLBACKS (optional but recommended)
# These provide stock photo fallbacks when no PDF screenshot is available.
# ================================================================
# Unsplash: https://unsplash.com/developers (free unlimited)
UNSPLASH_ACCESS_KEY=your_unsplash_access_key
# Pexels: https://www.pexels.com/api/ (free unlimited)
PEXELS_API_KEY=your_pexels_api_key

# ================================================================
# FILE UPLOADS
# ================================================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE_MB=50
ALLOWED_MIME_TYPES=application/pdf
# Maximum number of pages to extract images from (large PDFs can be slow)
MAX_PAGES_TO_EXTRACT=50
# Scale factor for rendering PDF pages as images (1.0=72dpi, 1.5=108dpi, 2.0=144dpi)
PDF_IMAGE_SCALE=1.5
# JPEG quality for extracted images (1-100)
PDF_IMAGE_QUALITY=85

# ================================================================
# PDF EXPORT (Puppeteer)
# ================================================================
EXPORT_TEMP_DIR=./exports
EXPORT_TIMEOUT_MS=30000
EXPORT_MAX_CONCURRENT=3

# ================================================================
# LOGGING
# ================================================================
# Levels: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info
